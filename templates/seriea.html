<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Serie A Data</title>
    <link rel="stylesheet" href="/static/css/styles.css" />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Bundle JS (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/mobile-menu.js" defer></script>
  </head>
  <body>
    {% include 'partials/_header.html' %}
    <div class="container main-content my-4">
      <h1 class="mb-4 text-center">Serie A Data</h1>
      <!-- Nav Tabs -->
      <ul class="nav nav-tabs" id="serieaTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="players-tab"
            data-bs-toggle="tab"
            data-bs-target="#playersContent"
            type="button"
            role="tab"
            aria-controls="playersContent"
            aria-selected="true"
          >
            Players Database
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="table-tab"
            data-bs-toggle="tab"
            data-bs-target="#tableContent"
            type="button"
            role="tab"
            aria-controls="tableContent"
            aria-selected="false"
          >
            League Table
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="fixtures-tab"
            data-bs-toggle="tab"
            data-bs-target="#fixturesContent"
            type="button"
            role="tab"
            aria-controls="fixturesContent"
            aria-selected="false"
          >
            Fixtures and Results
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="compare-tab"
            data-bs-toggle="tab"
            data-bs-target="#compareContent"
            type="button"
            role="tab"
            aria-controls="compareContent"
            aria-selected="false"
          >
            Compare Players
          </button>
        </li>
      </ul>
      <!-- Tab Content -->
      <div class="tab-content mt-4" id="serieaTabsContent">
        <!-- Players Database Tab -->
        <div class="tab-pane fade show active" id="playersContent" role="tabpanel" aria-labelledby="players-tab">
          <h2>Players Database</h2>
          {% if player_stats %}
            <div class="table-responsive">
              <table class="table table-bordered table-striped mt-3" style="min-width:1200px;">
                <thead class="table-dark">
                  <tr>
                    <th style="white-space: nowrap;">Player</th>
                    <th style="white-space: nowrap;">Team</th>
                    <th style="white-space: nowrap;">Goals</th>
                    <th style="white-space: nowrap;">Assist</th>
                    <th style="white-space: nowrap;">Goal Conceded</th>
                    <th style="white-space: nowrap;">Penalty Scored</th>
                    <th style="white-space: nowrap;">Own Goal</th>
                    <th style="white-space: nowrap;">Yellow Cards</th>
                    <th style="white-space: nowrap;">Red Cards</th>
                    <th style="white-space: nowrap;">Minutes Played</th>
                    <th style="white-space: nowrap;">Shot On-Target</th>
                    <th style="white-space: nowrap;">Key Passes</th>
                    <th style="white-space: nowrap;">Penalties Saved</th>
                    <th style="white-space: nowrap;">Recoveries</th>
                    <th style="white-space: nowrap;">Fouls</th>
                  </tr>
                </thead>
                <tbody>
                  {% for player in player_stats %}
                    <tr>
                      <td>
                        <div class="d-flex align-items-center">
                          <img src="{{ player.photo_url }}" alt="{{ player.name }}" class="player-photo" style="width:30px; height:30px; margin-right:5px;">
                          <span>{{ player.name }}</span>
                        </div>
                      </td>
                      <td>
                        <div class="d-flex align-items-center">
                          <img src="{{ player.team_logo }}" alt="{{ player.team }}" class="team-logo" style="width:30px; height:30px; margin-right:5px;">
                          <span>{{ player.team }}</span>
                        </div>
                      </td>
                      <td>{{ player.goals }}</td>
                      <td>{{ player.assists }}</td>
                      <td>{{ player.goal_conceded }}</td>
                      <td>{{ player.penalty_scored }}</td>
                      <td>{{ player.own_goal }}</td>
                      <td>{{ player.yellow_cards }}</td>
                      <td>{{ player.red_cards }}</td>
                      <td>{{ player.minutes_played }}</td>
                      <td>{{ player.shot_on_target }}</td>
                      <td>{{ player.key_passes }}</td>
                      <td>{{ player.penalties_saved }}</td>
                      <td>{{ player.recoveries }}</td>
                      <td>{{ player.fouls }}</td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          {% else %}
            <div class="table-responsive">
              <table class="table table-bordered table-striped mt-3" style="min-width:1200px;">
                <thead class="table-dark">
                  <tr>
                    <th style="white-space: nowrap;">Player</th>
                    <th style="white-space: nowrap;">Team</th>
                    <th style="white-space: nowrap;">Goals</th>
                    <th style="white-space: nowrap;">Assist</th>
                    <th style="white-space: nowrap;">Goal Conceded</th>
                    <th style="white-space: nowrap;">Penalty Scored</th>
                    <th style="white-space: nowrap;">Own Goal</th>
                    <th style="white-space: nowrap;">Yellow Cards</th>
                    <th style="white-space: nowrap;">Red Cards</th>
                    <th style="white-space: nowrap;">Minutes Played</th>
                    <th style="white-space: nowrap;">Shot On-Target</th>
                    <th style="white-space: nowrap;">Key Passes</th>
                    <th style="white-space: nowrap;">Penalties Saved</th>
                    <th style="white-space: nowrap;">Recoveries</th>
                    <th style="white-space: nowrap;">Fouls</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <div class="d-flex align-items-center">
                        <img src="https://via.placeholder.com/30" alt="Placeholder" class="player-photo" style="width:30px; height:30px; margin-right:5px;">
                        <span>Placeholder Player</span>
                      </div>
                    </td>
                    <td>
                      <div class="d-flex align-items-center">
                        <img src="https://via.placeholder.com/30" alt="Placeholder" class="team-logo" style="width:30px; height:30px; margin-right:5px;">
                        <span>Placeholder Team</span>
                      </div>
                    </td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                  </tr>
                </tbody>
              </table>
            </div>
          {% endif %}
        </div>

        <!-- League Table Tab -->
        <div class="tab-pane fade" id="tableContent" role="tabpanel" aria-labelledby="table-tab">
          <h2>League Table</h2>
          {% if league_table %}
            <div class="table-responsive">
              <table class="table table-bordered table-hover mt-3" style="min-width:1000px;">
                <thead class="table-dark">
                  <tr>
                    <th style="white-space: nowrap;">Position</th>
                    <th style="white-space: nowrap;">Team</th>
                    <th style="white-space: nowrap;">Played</th>
                    <th style="white-space: nowrap;">Wins</th>
                    <th style="white-space: nowrap;">Draws</th>
                    <th style="white-space: nowrap;">Losses</th>
                    <th style="white-space: nowrap;">Goals For</th>
                    <th style="white-space: nowrap;">Goals Against</th>
                    <th style="white-space: nowrap;">Goal Difference</th>
                    <th style="white-space: nowrap;">Points</th>
                  </tr>
                </thead>
                <tbody>
                  {% for row in league_table %}
                    <tr>
                      <td>{{ row.position }}</td>
                      <td>
                        <div class="d-flex align-items-center">
                          <img src="{{ row.team_logo or 'https://via.placeholder.com/30' }}" alt="{{ row.team }}" style="width:30px; height:30px; margin-right:5px;">
                          <span>{{ row.team }}</span>
                        </div>
                      </td>
                      <td>{{ row.played }}</td>
                      <td>{{ row.wins or 0 }}</td>
                      <td>{{ row.draws or 0 }}</td>
                      <td>{{ row.losses or 0 }}</td>
                      <td>{{ row.goals_for or 0 }}</td>
                      <td>{{ row.goals_against or 0 }}</td>
                      <td>{{ row.goal_difference or 0 }}</td>
                      <td>{{ row.points }}</td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          {% else %}
            <div class="table-responsive">
              <table class="table table-bordered table-hover mt-3" style="min-width:1000px;">
                <thead class="table-dark">
                  <tr>
                    <th style="white-space: nowrap;">Position</th>
                    <th style="white-space: nowrap;">Team</th>
                    <th style="white-space: nowrap;">Played</th>
                    <th style="white-space: nowrap;">Wins</th>
                    <th style="white-space: nowrap;">Draws</th>
                    <th style="white-space: nowrap;">Losses</th>
                    <th style="white-space: nowrap;">Goals For</th>
                    <th style="white-space: nowrap;">Goals Against</th>
                    <th style="white-space: nowrap;">Goal Difference</th>
                    <th style="white-space: nowrap;">Points</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1</td>
                    <td>
                      <div class="d-flex align-items-center">
                        <img src="https://via.placeholder.com/30" alt="Placeholder Team" style="width:30px; height:30px; margin-right:5px;">
                        <span>Placeholder Team</span>
                      </div>
                    </td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                  </tr>
                </tbody>
              </table>
            </div>
          {% endif %}
        </div>

        <!-- Fixtures Tab -->
        <div class="tab-pane fade" id="fixturesContent" role="tabpanel" aria-labelledby="fixtures-tab">
          <h2>Fixtures and Results</h2>
          <div class="mb-3">
            <label for="gameweek-select" class="form-label">Select Gameweek:</label>
            <select id="gameweek-select" class="form-select" onchange="updateFixtures(this.value)">
              <option value="1">Gameweek 1</option>
              <option value="2">Gameweek 2</option>
              <option value="3">Gameweek 3</option>
              <!-- Additional gameweeks as needed -->
            </select>
          </div>
          {% if matches %}
            <div class="table-responsive">
              <table class="table table-bordered table-striped mt-3">
                <thead class="table-dark">
                  <tr>
                    <th style="white-space: nowrap;">Date</th>
                    <th style="white-space: nowrap;">Time</th>
                    <th style="white-space: nowrap;">Home Team</th>
                    <th style="white-space: nowrap;">Score / Status</th>
                    <th style="white-space: nowrap;">Away Team</th>
                  </tr>
                </thead>
                <tbody>
                  {% for match in matches %}
                    <tr>
                      <td>{{ match.date or 'Placeholder Date' }}</td>
                      <td>{{ match.time or 'Placeholder Time' }}</td>
                      <td>
                        <div class="d-flex align-items-center">
                          <img src="{{ match.team_h_logo or 'https://via.placeholder.com/30' }}" alt="{{ match.team_h or 'Home Team' }}" style="width:30px;height:30px;margin-right:5px;">
                          <span>{{ match.team_h or 'Home Team' }}</span>
                        </div>
                      </td>
                      <td>
                        {% if match.started %}
                          {{ match.team_h_score }} - {{ match.team_a_score }}
                        {% else %}
                          vs
                        {% endif %}
                      </td>
                      <td>
                        <div class="d-flex align-items-center">
                          <img src="{{ match.team_a_logo or 'https://via.placeholder.com/30' }}" alt="{{ match.team_a or 'Away Team' }}" style="width:30px;height:30px;margin-right:5px;">
                          <span>{{ match.team_a or 'Away Team' }}</span>
                        </div>
                      </td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          {% else %}
            <div class="table-responsive">
              <table class="table table-bordered table-striped mt-3">
                <thead class="table-dark">
                  <tr>
                    <th style="white-space: nowrap;">Date</th>
                    <th style="white-space: nowrap;">Time</th>
                    <th style="white-space: nowrap;">Home Team</th>
                    <th style="white-space: nowrap;">Score / Status</th>
                    <th style="white-space: nowrap;">Away Team</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Placeholder Date</td>
                    <td>Placeholder Time</td>
                    <td>
                      <div class="d-flex align-items-center">
                        <img src="https://via.placeholder.com/30" alt="Home Team" style="width:30px;height:30px;margin-right:5px;">
                        <span>Placeholder Home</span>
                      </div>
                    </td>
                    <td>0 - 0</td>
                    <td>
                      <div class="d-flex align-items-center">
                        <img src="https://via.placeholder.com/30" alt="Away Team" style="width:30px;height:30px;margin-right:5px;">
                        <span>Placeholder Away</span>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          {% endif %}
        </div>

        <!-- Compare Players Tab -->
        <div class="tab-pane fade" id="compareContent" role="tabpanel" aria-labelledby="compare-tab">
          <h2>Compare Players</h2>
          <p>Enter player names (comma separated) to compare statistics.</p>
          <form id="compare-form" class="mt-3">
            <div class="mb-3">
              <label for="compare-input" class="form-label">Player Names</label>
              <input type="text" class="form-control" id="compare-input" placeholder="e.g. Player1, Player2">
            </div>
            <button type="submit" class="btn btn-primary">Compare</button>
          </form>
          <div id="compare-results" class="mt-4">
            <!-- Comparison results will be injected here (client-side script or a new endpoint) -->
          </div>
        </div>
      </div>
    </div>
    {% include 'partials/_footer.html' %}

    <script>
      document.addEventListener("DOMContentLoaded", function() {
        var menuButton = document.getElementById("menu-button");
        var menu = document.getElementById("menu");
        menuButton.addEventListener("click", function() {
          menu.classList.toggle("hidden");
        });
      });

      function updateFixtures(gameweek) {
        console.log("Selected gameweek: " + gameweek);
        // TODO: Add dynamic functionality to update fixtures based on the selected gameweek (e.g., via AJAX)
      }
    </script>
  </body>
</html> 